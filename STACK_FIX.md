# Stack Auth 404 Fix

## Проблема

Stack Auth handler выдает 404 после добавления многоязычности.

## Быстрое решение

### Вариант 1: Удалить старый handler (Рекомендуется)

1. **Удалите папку вручную:**
   ```
   src/app/handler/
   ```
2. **Перезапустите dev сервер:**

   ```bash
   npm run dev
   ```

3. **Проверьте новые URL:**
   - Русский: http://localhost:3000/ru/handler/sign-in
   - English: http://localhost:3000/en/handler/sign-in

### Вариант 2: Оставить оба handler (Временное решение)

Если не можете удалить старый handler, можно оставить оба:

- Старый: `/handler/...` (без локали)
- Новый: `/ru/handler/...` и `/en/handler/...` (с локалью)

Но это не рекомендуется, так как создает дублирование.

## Проверка работы

После удаления старого handler:

1. Откройте браузер
2. Перейдите на http://localhost:3000/ru
3. Нажмите кнопку "Sign In" в Header
4. Должна открыться страница `/ru/handler/sign-in` с формой входа

## Если всё ещё 404

### Проверьте структуру файлов:

Должна быть такая структура:

```
src/app/
├── [locale]/
│   ├── handler/
│   │   └── [...stack]/
│   │       └── page.tsx  ✅ Этот файл должен существовать
│   ├── layout.tsx
│   └── page.tsx
├── layout.tsx
└── page.tsx
```

### Проверьте, что файл существует:

```bash
# Проверьте, что файл существует
ls src/app/[locale]/handler/[...stack]/page.tsx
```

Если файл существует, но всё равно 404:

1. Остановите dev сервер (Ctrl+C)
2. Удалите папку `.next`:
   ```bash
   rm -rf .next
   ```
3. Запустите снова:
   ```bash
   npm run dev
   ```

## Альтернативное решение: Использовать старый handler

Если новый handler не работает, можно временно вернуться к старому:

1. Оставьте `src/app/handler/[...stack]/page.tsx` как есть
2. В Header используйте прямую ссылку:
   ```tsx
   <a href="/handler/sign-in">Sign In</a>
   ```

Но помните, что это обходной путь и лучше использовать новый handler с локалями.

## Нужна помощь?

Если ничего не помогло:

1. Проверьте консоль браузера на ошибки
2. Проверьте терминал с dev сервером на ошибки
3. Убедитесь, что все зависимости установлены: `npm install`

---

**После исправления удалите этот файл (STACK_FIX.md)**
